(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{383:function(t,s,a){"use strict";a.r(s);var e=a(40),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"上下文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上下文"}},[t._v("#")]),t._v(" 上下文")]),t._v(" "),a("p",[t._v("上下文作为整个框架中最重要的内容之一，请务必理解和完整地阅读此部分！")]),t._v(" "),a("p",[t._v("一个上下文描述了一个事件和所关联的对象的环境。例如：你在处理 HTTP 请求的 "),a("code",[t._v("@RequestMapping")]),t._v(" 绑定的事件中，你需要获取请求的 HTTP 头和 Cookie，再比如你在处理 QQ 机器人发来的命令 "),a("code",[t._v('@CQCommand("随机数")')]),t._v(" 的时候，在这个方法内，你需要获取发来的人的 QQ 号码。以上我们将处理以上运行环境的对象叫做上下文。")]),t._v(" "),a("p",[t._v("由于 Swoole 的协程加持，我们利用了协程 ID 绑定对象来进行构造上下文。")]),t._v(" "),a("p",[t._v("以默认的机器人收发消息为例，通过对默认模块的了解，我们可以知道，在绑定 "),a("code",[t._v("@CQCommand")]),t._v(" 等类似事件后，你可以用上下文获取发来这条消息的人的 QQ 号码：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * @CQCommand("你好")\n */')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hello")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user_id")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("context")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("context")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"你好啊，"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user_id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"，很高兴认识你！"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[a("code",[t._v("context()")]),t._v(" 就是获取上下文对象的全局函数，它还有简写："),a("code",[t._v("ctx()")]),t._v("。")]),t._v(" "),a("p",[t._v("当然，上下文中的方法不是每个都能在任何时候使用的。例如 "),a("code",[t._v("getUserId()")]),t._v(" 你不能在 "),a("code",[t._v("@RequestMapping")]),t._v(" 注解的函数中使用，因为它不是机器人消息的上下文。下面说明上下文对象的方法中，每个都会说明每个方法可以在哪些事件中使用：")]),t._v(" "),a("h2",{attrs:{id:"getserver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getserver"}},[t._v("#")]),t._v(" getServer()")]),t._v(" "),a("p",[t._v("获取 Swoole WebSocker Server 对象。此对象是 Swoole 的对象，详情见 "),a("a",{attrs:{href:"https://wiki.swoole.com/#/websocket_server",target:"_blank",rel:"noopener noreferrer"}},[t._v("Swoole 文档"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("可以使用的事件："),a("code",[t._v('@SwooleEventAt("message")')]),t._v("，"),a("code",[t._v('@SwooleEventAt("open")')]),t._v("，"),a("code",[t._v('@SwooleEventAt("close")')]),t._v("，"),a("code",[t._v("@OnStart()")]),t._v(" 以及所有 HTTP API 发来的事件："),a("code",[t._v("@CQCommand()")]),t._v("，"),a("code",[t._v("@CQMessage()")]),t._v(" 等。")]),t._v(" "),a("h2",{attrs:{id:"getframe"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getframe"}},[t._v("#")]),t._v(" getFrame()")]),t._v(" "),a("p",[t._v("获取 "),a("code",[t._v("\\Swoole\\Websocket\\Frame")]),t._v(" 对象，此对象是 Swoole 的对象，详情见 "),a("a",{attrs:{href:"https://wiki.swoole.com/#/websocket_server?id=swoolewebsocketframe",target:"_blank",rel:"noopener noreferrer"}},[t._v("Swoole 文档"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("可以使用的事件："),a("code",[t._v('@SwooleEventAt("message")')]),t._v(" 以及所有 HTTP API 发来的事件："),a("code",[t._v("@CQCommand()")]),t._v("，"),a("code",[t._v("@CQMessage()")]),t._v(" 等，")]),t._v(" "),a("h2",{attrs:{id:"getfd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getfd"}},[t._v("#")]),t._v(" getFd()")]),t._v(" "),a("p",[t._v("获取当前连入 Swoole 服务器的连接 fd 号。返回 int。")]),t._v(" "),a("p",[t._v("可以使用的事件：所有 "),a("strong",[t._v("getFrame()")]),t._v(" 可以使用的，"),a("code",[t._v('@SwooleEventAt("open")')]),t._v("，"),a("code",[t._v('@SwooleEventAt("close")')])]),t._v(" "),a("h2",{attrs:{id:"getdata"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getdata"}},[t._v("#")]),t._v(" getData()")]),t._v(" "),a("p",[t._v("返回 CQHTTP 事件上报的原始数据包，已经被解析成数组，可以直接操作。")]),t._v(" "),a("p",[t._v("可以使用的事件：所有 HTTP API 发来的事件："),a("code",[t._v("@CQCommand()")]),t._v("，"),a("code",[t._v("@CQMessage()")]),t._v(" 等。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @CQMessage()\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$data")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  Console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"消息类型是："')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"message_type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h2",{attrs:{id:"getrequest"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getrequest"}},[t._v("#")]),t._v(" getRequest()")]),t._v(" "),a("p",[t._v("返回 "),a("code",[t._v("\\Swoole\\Http\\Request")]),t._v(" 对象，可在 "),a("code",[t._v("@RequestMapping")]),t._v(" 中使用，获取 Cookie，请求头，GET 参数什么的。"),a("a",{attrs:{href:"https://wiki.swoole.com/#/http_server?id=httprequest",target:"_blank",rel:"noopener noreferrer"}},[t._v("Swoole 文档"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("可以使用的事件："),a("code",[t._v("@RequestMapping()")]),t._v("，"),a("code",[t._v('@SwooleEventAt("request")')]),t._v("，"),a("code",[t._v('@SwooleEventAt("open")')]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"getresponse"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getresponse"}},[t._v("#")]),t._v(" getResponse()")]),t._v(" "),a("p",[t._v("返回 "),a("code",[t._v("\\Swoole\\Http\\Response")]),t._v(" 对象的增强版，可在 HTTP 请求相关的事件中使用，返回内容和设置 Cookie 什么的。"),a("a",{attrs:{href:"https://wiki.swoole.com/#/http_server?id=httpresponse",target:"_blank",rel:"noopener noreferrer"}},[t._v("Swoole 文档"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("可以使用的事件："),a("code",[t._v("@RequestMapping()")]),t._v("，"),a("code",[t._v('@SwooleEventAt("request")')]),t._v("。")]),t._v(" "),a("p",[t._v("下面是使用以上两个功能的组合示例：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * @RequestMapping("/ping")\n */')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$name")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"unknown"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"Hello "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h2",{attrs:{id:"getconnection"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getconnection"}},[t._v("#")]),t._v(" getConnection()")]),t._v(" "),a("p",[t._v("返回此上下文相关联的 "),a("code",[t._v("WSConnection")]),t._v(" 对象。此对象详情在 "),a("RouterLink",{attrs:{to:"/guide/websocket-server.html#连接对象"}},[t._v("这里")]),t._v("。")],1),t._v(" "),a("p",[t._v("可以使用的事件：所有 "),a("strong",[t._v("getFrame()")]),t._v(" 可以使用的。")]),t._v(" "),a("h2",{attrs:{id:"getcid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getcid"}},[t._v("#")]),t._v(" getCid()")]),t._v(" "),a("p",[t._v("返回当前上下文所绑定的协程 ID，不出意外的话此 ID 和 "),a("code",[t._v("\\Co::getCid()")]),t._v(" 返回值一样。")]),t._v(" "),a("h2",{attrs:{id:"getrobot"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getrobot"}},[t._v("#")]),t._v(" getRobot()")]),t._v(" "),a("p",[t._v("返回当前上下文关联的机器人 API 调用对象 "),a("RouterLink",{attrs:{to:"/guide/component/zmrobot.html"}},[t._v("ZMRobot")]),t._v("。")],1),t._v(" "),a("p",[t._v("可以使用的事件：所有 HTTP API 发来的事件："),a("code",[t._v("@CQCommand()")]),t._v("，"),a("code",[t._v("@CQMessage()")]),t._v(" 等。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRobot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendPrivateMsg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"发送私聊消息"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"getmessage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getmessage"}},[t._v("#")]),t._v(" getMessage()")]),t._v(" "),a("p",[t._v("获取 data 数据中的 "),a("code",[t._v("message")]),t._v(" 消息。")]),t._v(" "),a("p",[t._v("可以使用的事件："),a("code",[t._v("@CQCommand()")]),t._v("，"),a("code",[t._v("@CQMessage")]),t._v("，"),a("code",[t._v('@CQBefore("message")')]),t._v("，"),a("code",[t._v('@CQAfter("message")')])]),t._v(" "),a("h2",{attrs:{id:"getuserid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getuserid"}},[t._v("#")]),t._v(" getUserId()")]),t._v(" "),a("p",[t._v("获取发消息的用户的 QQ 号码。")]),t._v(" "),a("p",[t._v("可以使用的事件：所有 "),a("strong",[t._v("含有")]),t._v(" "),a("code",[t._v("user_id")]),t._v(" 上报参数的 CQHTTP 事件。"),a("a",{attrs:{href:"https://cqhttp.cc/docs/#/Post",target:"_blank",rel:"noopener noreferrer"}},[t._v("CQHTTP - 事件上报"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"getgroupid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getgroupid"}},[t._v("#")]),t._v(" getGroupId()")]),t._v(" "),a("p",[t._v("获取发消息来自的 QQ 群号。")]),t._v(" "),a("p",[t._v("可以使用的事件：所有含有 "),a("code",[t._v("group_id")]),t._v(" 上报参数的 CQHTTP 事件。"),a("a",{attrs:{href:"https://cqhttp.cc/docs/#/Post",target:"_blank",rel:"noopener noreferrer"}},[t._v("CQHTTP - 事件上报"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"getdiscussid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getdiscussid"}},[t._v("#")]),t._v(" getDiscussId()")]),t._v(" "),a("p",[t._v("获取发消息来自的 QQ 讨论组 ID 号。")]),t._v(" "),a("p",[t._v("可以使用的事件：所有含有 "),a("code",[t._v("discuss_id")]),t._v(" 上报参数的 CQHTTP 事件。"),a("a",{attrs:{href:"https://cqhttp.cc/docs/#/Post",target:"_blank",rel:"noopener noreferrer"}},[t._v("CQHTTP - 事件上报"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"getmessagetype"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getmessagetype"}},[t._v("#")]),t._v(" getMessageType()")]),t._v(" "),a("p",[t._v("获取消息类型，同参数 "),a("code",[t._v("message_type")]),t._v("。")]),t._v(" "),a("p",[t._v("可以使用的事件：所有 "),a("code",[t._v("post_type")]),t._v(" 为 "),a("code",[t._v("message")]),t._v(" 的响应事件，如 "),a("code",[t._v("@CQMessage")]),t._v("，"),a("code",[t._v("@CQCommand")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"getrobotid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getrobotid"}},[t._v("#")]),t._v(" getRobotId()")]),t._v(" "),a("p",[t._v("获取事件上报的机器人自己的 QQ 号码。")]),t._v(" "),a("p",[t._v("可以使用的事件：所有 HTTP API 发来的事件："),a("code",[t._v("@CQCommand()")]),t._v("，"),a("code",[t._v("@CQNotice()")]),t._v(" 等。")]),t._v(" "),a("h2",{attrs:{id:"setmessage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setmessage"}},[t._v("#")]),t._v(" setMessage()")]),t._v(" "),a("p",[t._v("与 "),a("code",[t._v("getMessage()")]),t._v(" 对应，用于更改上下文中保存的事件信息，可以用于消息变更和过滤。")]),t._v(" "),a("h2",{attrs:{id:"setuserid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setuserid"}},[t._v("#")]),t._v(" setUserId()")]),t._v(" "),a("p",[t._v("与上同理，更改 "),a("code",[t._v("user_id")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"setgroupid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setgroupid"}},[t._v("#")]),t._v(" setGroupId()")]),t._v(" "),a("p",[t._v("与上同理。")]),t._v(" "),a("h2",{attrs:{id:"setdiscussid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setdiscussid"}},[t._v("#")]),t._v(" setDiscussId()")]),t._v(" "),a("p",[t._v("与上同理。")]),t._v(" "),a("h2",{attrs:{id:"setmessagetype"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setmessagetype"}},[t._v("#")]),t._v(" setMessageType()")]),t._v(" "),a("p",[t._v("与上同理，修改消息类型。")]),t._v(" "),a("h2",{attrs:{id:"setdata"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setdata"}},[t._v("#")]),t._v(" setData()")]),t._v(" "),a("p",[t._v("与上同理，与 "),a("code",[t._v("getData()")]),t._v(" 对应，用于更改上下文中的 "),a("code",[t._v("data")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"getcache"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getcache"}},[t._v("#")]),t._v(" getCache()")]),t._v(" "),a("p",[t._v("获取保存在上下文中的临时缓存变量。当相关联的事件结束后，数据会从内存中被释放。用于同一事件的多个函数中的信息传递。")]),t._v(" "),a("ul",[a("li",[t._v("参数："),a("code",[t._v("$key")]),t._v("，缓存变量的键名")]),t._v(" "),a("li",[t._v("返回："),a("code",[t._v("mixed")]),t._v("，存入缓存的变量值。")])]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"block_continue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果变量不存在，则返回 null")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h2",{attrs:{id:"setcache"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setcache"}},[t._v("#")]),t._v(" setCache()")]),t._v(" "),a("p",[t._v("与 "),a("code",[t._v("getCache()")]),t._v(" 对应，是设置内容的。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"abc"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"asdasd"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"abc"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// asdasd")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h2",{attrs:{id:"reply"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reply"}},[t._v("#")]),t._v(" reply()")]),t._v(" "),a("p",[t._v("快速回复当前用户消息内容。")]),t._v(" "),a("ul",[a("li",[t._v("参数1："),a("code",[t._v("$msg")]),t._v("，字符串，你要回复的消息内容")]),t._v(" "),a("li",[t._v("参数2："),a("code",[t._v("$yield = false")]),t._v("，可选，当为 "),a("code",[t._v("true")]),t._v(" 时，会协程等待后返回 "),a("strong",[t._v("消息回复")]),t._v(" 的结果，包括 API 状态码、消息 "),a("code",[t._v("message_id")]),t._v(" 等。")])]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$r")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"我又好了。"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$r")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"retcode"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("success")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"消息发送成功！"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h2",{attrs:{id:"finalreply"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#finalreply"}},[t._v("#")]),t._v(" finalReply()")]),t._v(" "),a("p",[t._v("快速回复用户消息，并阻止其他模块接下来继续处理此事件。")]),t._v(" "),a("p",[t._v("参数同 "),a("code",[t._v("reply()")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"waitmessage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#waitmessage"}},[t._v("#")]),t._v(" waitMessage()")]),t._v(" "),a("ul",[a("li",[t._v("参数："),a("code",[t._v('waitMessage($prompt = "", $timeout = 600, $timeout_prompt = "")')])]),t._v(" "),a("li",[t._v("用途：等待用户输入消息")])]),t._v(" "),a("p",[a("code",[t._v("$prompt")]),t._v(" 参数为回复用户的文本内容，"),a("code",[t._v("$timeout")]),t._v(" 是等待用户回复的超时时间(秒)，"),a("code",[t._v("$timeout_prompt")]),t._v(" 是超时后回复用户的文本。")]),t._v(" "),a("p",[t._v("用法示例：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * @CQCommand("自我介绍")\n */')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yourName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$r")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("context")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("waitMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"你叫啥名字呀？"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("600")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"你都10分钟不理我了，嘤嘤嘤"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("context")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("finalReply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"好的，可爱的机器人记住你叫 "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$r")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('" 啦！以后多聊天哦！"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("效果就是，给机器人发送 "),a("code",[t._v("自我介绍")]),t._v(" 后，它问你 "),a("code",[t._v("你叫啥名字呀？")]),t._v("，如果你在 10 分钟内回复了机器人，则会回你下面一条句子，如果 10 分钟还没有回复，则机器人会回复你不理你的句子。")]),t._v(" "),a("h2",{attrs:{id:"getargs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getargs"}},[t._v("#")]),t._v(" getArgs()")]),t._v(" "),a("ul",[a("li",[t._v("参数："),a("code",[t._v("getArgs(&$arg, $mode, $prompt_msg)")])]),t._v(" "),a("li",[t._v("用途：是 "),a("code",[t._v("waitMessage()")]),t._v(" 的封装，常用于配合 "),a("code",[t._v("@CQCommand")]),t._v(" 使用，在 "),a("code",[t._v("@CQCommand")]),t._v(" 介绍中就用了此函数，可以看其中的例子。")])]),t._v(" "),a("p",[a("code",[t._v("$arg")]),t._v(" 为命令传递进入的参数引用。")]),t._v(" "),a("p",[a("code",[t._v("$mode")]),t._v(" 支持：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("ZM_MATCH_ALL")]),t._v("：获取除命令本身外的所有后续内容，例如 "),a("code",[t._v("疫情 iafwebfuaw 乏味")]),t._v("，match 后就会匹配到 "),a("code",[t._v("iafwebfuaw 乏味")]),t._v("。如果触发命令只有参数本身的时候，则调用 "),a("code",[t._v("waitMessage")]),t._v(" 等待用户输入参数。")]),t._v(" "),a("li",[a("code",[t._v("ZM_MATCH_NUMBER")]),t._v("：获取后续参数中第一个数字参数，例如 "),a("code",[t._v("疫情 北京 123")]),t._v("，match 后就会获取到 "),a("code",[t._v("123")]),t._v("。如果触发命令没有数字的时候，则调用 "),a("code",[t._v("waitMessage")]),t._v(" 等待用户输入参数。")]),t._v(" "),a("li",[a("code",[t._v("ZM_MATCH_FIRST")]),t._v("：获取命令后的第一个参数，例如 "),a("code",[t._v("疫情 北京 123")]),t._v("，match 后就会获取到 "),a("code",[t._v("北京")]),t._v("。如果触发命令只有参数本身的时候，则调用 "),a("code",[t._v("waitMessage")]),t._v(" 等待用户输入参数。")])]),t._v(" "),a("p",[a("code",[t._v("$prompt_msg")]),t._v("：当遇到等待的时候，向用户发送输入的提醒消息内容，同 "),a("code",[t._v("waitMesssage")]),t._v(" 的 "),a("code",[t._v("$prompt")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"copy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#copy"}},[t._v("#")]),t._v(" copy()")]),t._v(" "),a("p",[t._v("返回此上下文的所有对象和变量，以数组的形式。")]),t._v(" "),a("ul",[a("li",[t._v("返回值：可自行 var_dump 查看。")])]),t._v(" "),a("h2",{attrs:{id:"模块阻断"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块阻断"}},[t._v("#")]),t._v(" 模块阻断")]),t._v(" "),a("p",[t._v("模块阻断指的是，一个事件可能会依次触发多个绑定的方法，如果在执行到前面的方法，不想让后面的方法继续执行，你可以使用这个万金油阻断接下来的其他模块中的函数运行：")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("context")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"block_continue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("比如你在设置了多个 "),a("code",[t._v("@CQMessage()")]),t._v("，如果第一个代码里面，执行了模块阻断，则接下来的其他 CQMessage 都不会执行到。")]),t._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @CQMessage(level=25)\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("msg1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("context")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"block_continue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置阻断")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @CQMessage(level=20)\n */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("msg2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这个永远不会被执行到")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);